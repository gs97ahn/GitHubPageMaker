<!DOCTYPE html>
<html>

<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Big Data - Stream(1)</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Web Font Setting -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Prompt&display=swap">
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>
        .hljs {
            background: none;
        }
    </style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Computer Science & Engineering" />
    <link rel="shortcut icon" href="/assets/built/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/Big_Data-Stream(1)" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="nogamsung" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Big Data - Stream(1)" />
    <meta property="og:description" content="Characteristics of Stream Data Infinite, Burst, and Non-stationary The size of the entire data set is unknown Only INSTANTLY accessible Stream management is important when the input rate is controlled externally: Google queries Twitter or Facebook status updates Applications Mining query streams Google wants to know what queries are more" />
    <meta property="og:url" content="/Big_Data-Stream(1)" />
    <meta property="og:image" content="/assets/built/images/big-data-logo.jpeg" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2022-09-19T00:00:00+09:00" />
    <meta property="article:modified_time" content="2022-09-19T00:00:00+09:00" />
    <meta property="article:tag" content="Comsci" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Big Data - Stream(1)" />
    <meta name="twitter:description" content="Characteristics of Stream Data Infinite, Burst, and Non-stationary The size of the entire data set is unknown Only INSTANTLY accessible Stream management is important when the input rate is controlled externally: Google queries Twitter or Facebook status updates Applications Mining query streams Google wants to know what queries are more" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/assets/built/images/big-data-logo.jpeg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="nogamsung" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Comsci" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "nogamsung",
        "logo": "/"
    },
    "url": "/Big_Data-Stream(1)",
    "image": {
        "@type": "ImageObject",
        "url": "/assets/built/images/big-data-logo.jpeg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/Big_Data-Stream(1)"
    },
    "description": "Characteristics of Stream Data Infinite, Burst, and Non-stationary The size of the entire data set is unknown Only INSTANTLY accessible Stream management is important when the input rate is controlled externally: Google queries Twitter or Facebook status updates Applications Mining query streams Google wants to know what queries are more"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Big Data - Stream(1)" href="/feed.xml" />


</head>

<body
    class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
        
        <a class="site-nav-logo" href="/">nogamsung</a>
        
        
        
        <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-frontend" role="menuitem"><a href="/tag/frontend/">Frontend</a></li>
    <li class="nav-backend" role="menuitem"><a href="/tag/backend/">Backend</a></li>
    <li class="nav-backend" role="menuitem"><a href="/tag/devops/">DevOps</a></li>
    <li class="nav-ai" role="menuitem"><a href="/tag/ai/">AI</a></li>
    <li class="nav-backend" role="menuitem"><a href="/tag/comsci/">ComSci</a></li>
    <li class="nav-etc" role="menuitem"><a href="/tag/etc/">ETC</a></li>
    <li class="nav-archive" role="menuitem">
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag</a>
    </li>
</ul>
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
        <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>
    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-comsci post tag-comsci ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="19 September 2022">19 September 2022</time>
                    
                    <span class="date-divider">/</span>
                    
                    
                    <a href='/tag/comsci/'>COMSCI</a>
                    
                    
                    
                </section>
                <h1 class="post-full-title">Big Data - Stream(1)</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/big-data-logo.jpeg)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h3 id="characteristics-of-stream-data">Characteristics of Stream Data</h3>

<ul>
  <li>Infinite, Burst, and Non-stationary
    <ul>
      <li>The size of the entire data set is unknown</li>
    </ul>
  </li>
  <li>Only <strong>INSTANTLY</strong> accessible</li>
  <li>Stream management is important when the input rate is controlled externally:
    <ul>
      <li>Google queries</li>
      <li>Twitter or Facebook status updates</li>
    </ul>
  </li>
</ul>

<h3 id="applications">Applications</h3>

<ul>
  <li>Mining query streams
    <ul>
      <li>Google wants to know what queries are more frequent today than yesterday</li>
    </ul>
  </li>
  <li>Mining lick streams
    <ul>
      <li>Yahoo wants know which of its pages are getting an unusual number of hits in the past hour</li>
    </ul>
  </li>
  <li>Mining social network news feeds
    <ul>
      <li>e.g. look for trending topics on Twitter or Facebook</li>
    </ul>
  </li>
  <li>Sensor Networks
    <ul>
      <li>Many sensors feeding into a central controller</li>
    </ul>
  </li>
  <li>IP packets monitored at a switch
    <ul>
      <li>Gather information for optimal routing</li>
      <li>Detect denial-of-service(DOS) attacks</li>
    </ul>
  </li>
</ul>

<h3 id="the-stream-model">The Stream Model</h3>

<ul>
  <li>Input <strong>elements</strong> enter at a rapid rate, at one or more input ports
    <ul>
      <li>We call elements of the stream tuples</li>
    </ul>
  </li>
  <li>The system cannot store the entire stream</li>
</ul>

<h3 id="general-stream-processing-model">General Stream Processing Model</h3>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-1.jpeg" alt="screenshot-1" /></p>

<h3 id="operations-on-data-streams">Operations on Data Streams</h3>

<ul>
  <li>A subset of input streams
    <ul>
      <li>Sampling data from a stream
        <ul>
          <li>Construct a random sample</li>
        </ul>
      </li>
      <li>Queries over sliding windows
        <ul>
          <li>Number of items of type <em>x</em> in the last <em>k</em> elements of the stream</li>
        </ul>
      </li>
      <li>Filtering a data stream
        <ul>
          <li>Select elements with property <em>x</em> from the stream</li>
        </ul>
      </li>
      <li>Counting distinct elements
        <ul>
          <li>Number of distinct elements in the last <em>k</em> elements of the stream</li>
        </ul>
      </li>
      <li>Estimating moments
        <ul>
          <li>Estimate avg./std. dev. of the last <em>k</em> elements</li>
        </ul>
      </li>
      <li>…</li>
    </ul>
  </li>
</ul>

<h3 id="start-from-sampling">Start from sampling</h3>

<ul>
  <li>Sample a fixed proportion of elements in the stream</li>
  <li>Maintain a random sample of fixed size over a potentially infinite stream
    <ul>
      <li>At any “time” <strong><em>k</em></strong> we would like a random sample of <strong><em>s</em></strong> elements</li>
    </ul>
  </li>
</ul>

<h2 id="sampling-from-a-data-stream-sampling-a-fixed-proportion">Sampling from a Data Stream: Sampling a fixed proportion</h2>

<h3 id="sampling-a-fixed-proportion">Sampling a Fixed Proportion</h3>

<ul>
  <li>Scenario: Search engine query stream
    <ul>
      <li>Stream of tuples: (user, query, time)</li>
      <li>Answer questions such as: How often did a user run the same query in a single day</li>
      <li>Have space to store 1/10 of query stream</li>
    </ul>
  </li>
  <li>Naive solution
    <ul>
      <li>Generate a random integer for each query</li>
      <li>Store the query if the integer is 0, otherwise discard</li>
    </ul>
  </li>
</ul>

<h3 id="problem-with-naive-approach">Problem with Naive Approach</h3>

<ul>
  <li>Question: What fraction of queries by an user are duplicates?
    <ul>
      <li>Suppose each user issues <em>x</em> queries once and <em>d</em> queries twice.</li>
    </ul>
  </li>
  <li>Solution: Keep 10% of the queries.
    <ul>
      <li>Sample will contain <em>x/10</em> of the singleton queries and <em>2d/10</em> of the duplicate queries at least once.</li>
      <li>But only <em>d/100</em> pairs of duplicates
        <ul>
          <li><em>d/100 = 1/10 * 1/10 * d</em></li>
        </ul>
      </li>
      <li>Of <em>d</em> “duplicates” <em>18d/100</em> appear exactly once
        <ul>
          <li><em>18d/100 = ((1/10 * 9/10) + (9/10 * 1/10)) * d</em></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Sample-based answer is the following:</li>
</ul>

<p><img src="https://latex.codecogs.com/svg.image?\frac{\frac{d}{100}}{\frac{x}{10}&space;&plus;&space;\frac{d}{100}&space;&plus;&space;\frac{18d}{100}}&space;=&space;\frac{d}{10x&space;&plus;&space;19d}" alt="equation-1" /></p>

<ul>
  <li><strong>Problem</strong>: Error would occur from “Probability of selection”.
    <ul>
      <li>Possible solution: Sampling user, not query
        <ul>
          <li>Pick <em>1/10th</em> of users and take all their searches in the sample</li>
          <li>Use a hash function that hashes the user name or user id uniformly into 10 buckets</li>
        </ul>
      </li>
      <li><strong>Generalized Solution</strong>: Use stream of tuples with keys
        <ul>
          <li>Key is a subset of each tuple’s component</li>
          <li>Choice of key depends on application</li>
          <li>To get a sample <em>a/b</em> fraction of the stream:
            <ul>
              <li>Hash each tuple’s key uniformly into <strong>b</strong> buckets</li>
              <li>Pick the tuple if its hash value is at most <strong>a</strong></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="sampling-from-a-data-stream-sampling-a-fixed-sized-tuples">Sampling from a Data Stream: Sampling a fixed-sized tuples</h2>

<h3 id="maintaining-a-fixed-size-sample">Maintaining a fixed-size sample</h3>

<ul>
  <li>Suppose we need to maintain a random sample <em>S</em> of size exactly <em>s</em> tuples due to the main memory size constraint 
because the length of the stream is unknown.</li>
  <li>Suppose at time <em>n</em> we have seen <em>s</em> items.
    <ul>
      <li>Goal: Each item is in the sample <em>S</em> with equal probability of <em>s/n</em>.</li>
    </ul>
  </li>
</ul>

<h3 id="illustration-s--2">Illustration (s = 2)</h3>

<ul>
  <li>Stream: a x c y z k c d e g</li>
  <li>At <strong>n = 5</strong>, each of the first 5 tuples is included in the sample <strong>S</strong> with equal probability.</li>
  <li>At <strong>n = 7</strong>, each of the first 7 tuples is included in the sample <strong>S</strong> with equal probability.</li>
  <li>Impractical solution would be to store all the <em>n</em> tuples seen so far and out of them pick <strong>s</strong> at random.</li>
</ul>

<h3 id="solution-reservoir-sampling">Solution: Reservoir Sampling</h3>

<h4 id="algorithm">Algorithm</h4>

<ul>
  <li>Store all the first <strong>s</strong> elements of the stream to <strong>S</strong>.</li>
  <li>Suppose we have seen <strong>n-1</strong> elements, and now the <strong>n th</strong> element arrives <strong>(n &gt; s)</strong>.
    <ul>
      <li>With probability <strong>s/n</strong>, keep the <strong>n th</strong> element, then it replaces one of the <strong>s</strong> elements in the sample <strong>S</strong>,
picked uniformly at random</li>
    </ul>
  </li>
</ul>

<h4 id="claim">Claim</h4>

<ul>
  <li>This algorithm maintains a sample <strong>S</strong> with the desired property. After <strong>n</strong> elements, the sample contains each
element seen so far with probability <strong>s/n</strong>.</li>
</ul>

<h3 id="proof-of-reservoir-sampling-by-induction">Proof of Reservoir Sampling By Induction</h3>

<ul>
  <li>Assume that after <em>n</em> elements, the sample contains each element seen so far with probability <em>s/n</em>.</li>
  <li>We need to show that after seeing element <em>n+1</em> the sample maintains the property. Sample contains each element seen
so far with probability <em>s/(n+1)</em>.</li>
</ul>

<p><strong><em>Base Case</em></strong></p>

<ul>
  <li>After we see <em>n=s</em> elements that sample <em>S</em> has the desired property. Each out of <em>n=s</em> elements is in the sample with
probability y <em>s/s = 1</em></li>
</ul>

<p><strong><em>Inductive Hypothesis</em></strong></p>

<ul>
  <li>After <em>n</em> elements, the sample <em>S</em> contains each element seen so far with probability <em>s/n</em>.</li>
</ul>

<p><strong><em>Inductive step</em></strong></p>

<ul>
  <li>After the element arrives ate <em>n+1</em>, for elements already in S, probability that the algorithm keeps it in <em>S</em> is:</li>
</ul>

<p><img src="https://latex.codecogs.com/svg.image?(1&space;-&space;\frac{s}{n&space;&plus;&space;1})&space;&plus;&space;(\frac{s}{n&space;&plus;&space;1})(\frac{s&space;-&space;1}{s})&space;=&space;\frac{n}{n&space;&plus;&space;1}" alt="equation-2" /></p>

<ul>
  <li>At time <em>n</em>, tuples in <em>S</em> were there with probability <em>s/n</em></li>
  <li>Time <em>n -&gt; n+1</em>, tuple stayed in <em>S</em> with probability <em>n/(n+1)</em></li>
  <li>Therefore, probability tuple is in <em>S</em> at time <em>n+1</em> is:</li>
</ul>

<p><img src="https://latex.codecogs.com/svg.image?\frac{s}{n}&space;\cdot&space;\frac{n}{n&space;&plus;&space;1}&space;=&space;\frac{s}{n&space;&plus;&space;1}" alt="equation-3" /></p>

<h2 id="queries-over-a-long-sliding-window">Queries over a (long) Sliding Window</h2>

<ul>
  <li>A useful model of stream processing is that queries are about a <strong>window</strong> of length <em>N</em>, the <em>N</em> most recent elements
received.</li>
</ul>

<h3 id="sliding-windows">Sliding Windows</h3>

<ul>
  <li>A useful model of stream processing is that queries are about a window of length <em>N</em>, the <em>N</em> most recent elements
received.</li>
</ul>

<h3 id="sliding-window-1-stream">Sliding Window: 1 Stream</h3>

<ul>
  <li>Sliding window on a single stream:
    <ul>
      <li>N = 6</li>
    </ul>
  </li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-2.jpeg" alt="screenshot-2" /></p>

<h4 id="example-problem-counting-bits">Example Problem: Counting Bits</h4>

<p><strong>Problem</strong></p>

<ul>
  <li>Given a stream of <strong>0</strong>s and <strong>1</strong>s</li>
  <li>Be prepared to answer queries of the form <strong>How many 1s are in the last <em>k</em> bits?</strong> where k &lt;= N</li>
</ul>

<p><strong>Obvious Solution</strong></p>

<ul>
  <li>Store the most recent <em>N</em> bits, and when a new bit comes in, discard the <em>N+1st</em> bit.</li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-3.jpeg" alt="screenshot-3" /></p>

<p><strong>Real Problem</strong></p>

<ul>
  <li>What if we cannot afford to store <em>N</em> bits?
    <ul>
      <li>e.g. we’re processing 1 billion streams and <em>N = 1 billion</em>.</li>
    </ul>
  </li>
</ul>

<p><strong>Simple Solution</strong></p>

<ul>
  <li>A simple solution that does not really solve our problem: <strong>Uniformity assumption</strong>.</li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-4.jpeg" alt="screenshot-4" /></p>

<ul>
  <li>Maintain 2 counters:
    <ul>
      <li><strong><em>S</em></strong>: number of 1s from the beginning of the stream.</li>
      <li><strong><em>Z</em></strong>: number of 0s from the beginning of the stream.</li>
    </ul>
  </li>
  <li>How many 1s are in the last N bits?</li>
</ul>

<p><img src="https://latex.codecogs.com/svg.image?N&space;\cdot&space;\frac{S}{S&space;&plus;&space;Z}" alt="equation-4" /></p>

<p><strong>However, what if the stream is non-uniform? What if the distribution changes over time?</strong></p>

<h3 id="dgim-method">DGIM Method</h3>

<ul>
  <li>Does NOT assume uniformity</li>
  <li>Store O(log<sup>2</sup>N) bits per stream</li>
  <li>Gives approximate answer, never off by more than 50%</li>
</ul>

<h4 id="beginning-idea-exponential-windows">Beginning Idea: Exponential Windows</h4>

<ul>
  <li>Summarize exponentially increasing regions of the stream, looking backward</li>
  <li>Drop small regions if they begin ate the same point as a larger region:</li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-5.jpeg" alt="screenshot-5" /></p>

<p><strong>Pros</strong></p>

<ul>
  <li>Stores only O(log<sup>2</sup>N) bits. O(logN) <Windows counts=""> counts of log<sub>2</sub>N <Window size=""> bits each.</Window></Windows></li>
  <li>Easy update as more bits enter</li>
  <li>Error in count no greater than the number of 1s the “unknown” area</li>
</ul>

<p><strong>Cons</strong></p>

<ul>
  <li>As long as the 1s are fairly evenly distributed, the error is small due to the unknown region - no more than 50%</li>
  <li>However, it could be that all the 1s are in the unknown area at the end</li>
  <li>In that case, the error changes w.r.t. N</li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-6.jpeg" alt="screenshot-6" /></p>

<h4 id="fixup-dgim-method">Fixup: DGIM Method</h4>

<ul>
  <li>We do not have to count both 0s and 1s</li>
  <li>Instead of summarizing fixed-length blocks, summarize blocks with specific number of 1s. In other words, let the block
sizes (number of 1s) increase exponentially</li>
  <li>When there are few 1s in the window, block sizes stay small, so errors are small.</li>
</ul>

<h4 id="dgim-timestamps">DGIM: Timestamps</h4>

<ul>
  <li>Each bit in the stream has a <em>timestamp</em>, starting 1, 2, …</li>
  <li>Record timestamps modulo <em>N</em> (the window size), so we can represent any relevant timestamp in O(log<sub>2</sub>N) 
bits, and store <em>N</em> = 4 using 2 bits</li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-7.jpeg" alt="screenshot-7" /></p>

<h4 id="dgim-buckets">DGIM: Buckets</h4>

<ul>
  <li>A <em>bucket</em> in the DGIM method is a record consisting of:
    <ol>
      <li>The timestamp of its end [O(logN) bits]</li>
      <li>The number of 1s between its beginning and end [O(log log N) bits]</li>
    </ol>
  </li>
  <li>Constraint on buckets:
    <ul>
      <li>The number of 1s MUST be a power of 2.</li>
      <li>Either <strong>one</strong> or <strong>two</strong> buckets with the same power-of-2 number of 1s.</li>
      <li>Does not overlap in timestamps.</li>
      <li>Sorted by size. Earlier buckets are not smaller than later buckets.</li>
      <li>Buckets disappear when their end-time is &gt; <em>N</em> time units in the past</li>
    </ul>
  </li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-8.jpeg" alt="screenshot-8" /></p>

<p><strong>Example: Representing a Stream by Buckets</strong></p>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-9.jpeg" alt="screenshot-9" /></p>

<p>Three properties of buckets that are maintained:</p>
<ul>
  <li>Either <strong>one</strong> or <strong>two</strong> buckets with the same <strong>power-of-2</strong> number of <strong>1s</strong>.</li>
  <li>Buckets do not overlap in timestamps</li>
  <li>Buckets are sorted by size</li>
</ul>

<p><strong>Updating Buckets</strong></p>

<ul>
  <li>When a new bit comes in, drop the last (oldest) bucket if its end-time is prior to <em>N</em> time units before the current
time</li>
  <li>2 cases: Current bit is 0 or 1</li>
  <li>If the current bit is 0, no other changes are needed</li>
  <li>If the current bit is 1:
    <ol>
      <li>Create a new bucket of size 1, for just this bit
        <ul>
          <li>End timestamp = current time</li>
        </ul>
      </li>
      <li>If there are now <strong>three buckets of size 1</strong>, combine the oldest two into a bucket of size 2</li>
      <li>If there are now <strong>three buckets of size 2</strong>, combine the oldest two into a bucket of size 4</li>
      <li>so on…</li>
    </ol>
  </li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-10.jpeg" alt="screenshot-10" /></p>

<h4 id="example-bucketized-stream">Example: Bucketized Stream</h4>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-11.jpeg" alt="screenshot-11" /></p>

<p><strong>Why is the error 50%?</strong></p>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-12.jpeg" alt="screenshot-12" /></p>

<ul>
  <li>Suppose the last bucket has size 2<sup>r</sup></li>
  <li>Then by assuming 2<sup>r-1</sup> of its 1s are still within the window, we make an error of at most 2<sup>r-1</sup></li>
  <li>Since there is at least one bucket of each of the sizes less than 2<sup>r</sup>, the true sum is at least:</li>
</ul>

<p><img src="https://latex.codecogs.com/svg.image?1&space;&plus;&space;2&space;&plus;&space;4&space;&plus;&space;2^{r-1}&space;=&space;2^{r-1}" alt="equation-5" /></p>

<p>Thus, error ate most 50%</p>

<p><strong>Further Reducing the Error</strong></p>

<ul>
  <li>Instead of maintaining 1 or 2 of each size bucket, we allow either <em>r-1</em> or <em>r</em> buckets (<em>r &gt; 2</em>), except for the
largest size buckets; we can have any number between 1 and r of those</li>
  <li>Error is at most O(1/r)</li>
  <li>By picking <em>r</em> appropriately, we can tradeoff between number of bits we store and the error</li>
</ul>

<p>Can we use the same trick to answer queries <strong>How many 1’s in the last k?</strong> where k &lt; N?</p>

<ul>
  <li>Find the earliest bucket <em>B</em> that at overlaps with <em>k</em>. Number of <strong>1s</strong> is the <em>*sum of sizes of more recent buckets
and *1/2</em> size of B.</li>
</ul>

<p><img src="../../../assets/screenshots/2022/09/18/screenshot-13.jpeg" alt="screenshot-13" /></p>

<h2 id="reference">Reference</h2>
<ul>
  <li><a href="http://www.mmds.org/" target="_blank">Mining of Massive Datasets by Jure Leskovec, Anand Rajaraman, Jeff Ullman</a></li>
  <li>Introduction to Big Data Lecture by <a href="https://www.inu.ac.kr/user/indexSub.do?codyMenuSeq=2236524&amp;siteId=isis&amp;dum=dum&amp;command=empDetail&amp;empNum=20201168&amp;empSearchTab=01&amp;deptCode=&amp;siteId=isis" target="_blank">Daejin Choi</a> in <a href="https://www.inu.ac.kr/" target="_blank">Incheon National University</a></li>
</ul>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!---
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to nogamsung</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm" />
    <input class="location" type="hidden" name="location" />
    <input class="referrer" type="hidden" name="referrer" />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()" id="searchtext" type="text" name="searchtext"
            placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if (event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                </section>
            
            -->

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                
                <section class="author-card">
                    
                    <img class="author-profile-image" src="/assets/built/images/author-logo.jpeg"
                        alt="gs97ahn" />
                    
                    <section class="author-card-content">
                        <h4 class="author-card-name"><a href="/author/gs97ahn">nogamsung</a></h4>
                        
                        <p><a href="gs97ahn.github.io/about/">Geomseong Ahn</a></p>
                        
                    </section>
                </section>
                <div class="post-full-footer-right">
                    <a class="author-card-button" href="/author/gs97ahn">Read More</a>
                </div>
                
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
            <section class="post-full-comments">
                <div id="disqus_thread"></div>
                <script>
                    var disqus_config = function () {
                        var this_page_url = '/Big_Data-Stream(1)';
                        var this_page_identifier = '/Big_Data-Stream(1)';
                        var this_page_title = 'Big Data - Stream(1)';
                    };
                    (function () {
                        var d = document, s = d.createElement('script');
                        s.src = 'https://geomseongahn.disqus.com/embed.js';
                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                    })();
                </script>
            </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
            
            
            
            
            <article class="read-next-card" 
                style="background-image: url(/assets/built/images/blog-cover.jpg)" >
                <header class="read-next-card-header">
                    <small class="read-next-card-header-sitetitle">&mdash; nogamsung &mdash;</small>
                    
                    <h3 class="read-next-card-header-title"><a href="/tag/comsci/">Comsci</a></h3>
                    
                </header>
                <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                <div class="read-next-card-content">
                    <ul>
                        
                        
                        
                        
                        
                         <li><a href="/Big_Data-Text_Mining_(LSA)_Visualization">Big Data - Text Mining (LSA) Visualization</a></li>
                            
                            
                            
                            
                        
                        
                        
                         <li><a href="/Big_Data-Text_Mining">Big Data - Text Mining</a></li>
                            
                            
                            
                            
                        
                        
                        
                         <li><a href="/Computer_Network-TCP_Congestion_Control">Computer Network - TCP Congestion Control</a></li>
                            
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                            
                            
                        
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                        
                        
                        
                            
                            
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                    </ul>
                </div>
                <footer class="read-next-card-footer">
                    <a href="/tag/comsci/">
                        
                        See all 43 posts →
                        
                    </a>
                </footer>
            </article>
            
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
            

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Computer_Network-Delay_Loss_and_Throughput_in_Packet_Switched_Networks">
                <div class="post-card-image" style="background-image: url(/assets/built/images/computer-network-logo.jpeg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Computer_Network-Delay_Loss_and_Throughput_in_Packet_Switched_Networks">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Comsci</span>
                            
                        
                    

                    <h2 class="post-card-title">Computer Network - Delay, Loss, and Throughput in Packet-Switched Networks</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>1️⃣ Overview of Delay in Packet-Switched Networks

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpeg" alt="nogamsung" />
                        
                        <span class="post-card-author">
                            <a href="/author/gs97ahn/">nogamsung</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      3 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
            

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Unreal_Engine-Asset">
                <div class="post-card-image" style="background-image: url(/assets/built/images/unreal-engine-logo.jpeg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Unreal_Engine-Asset">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Etc</span>
                            
                        
                    

                    <h2 class="post-card-title">Unreal Engine - Asset</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>Making Mesh

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/author-logo.jpeg" alt="nogamsung" />
                        
                        <span class="post-card-author">
                            <a href="/author/gs97ahn/">nogamsung</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
            <span>nogamsung</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Big Data - Stream(1)</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw"
            href="https://twitter.com/share?text=Big+Data+-+Stream%281%29&amp;url=https://gs97ahn.github.io/Big_Data-Stream(1)"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb"
            href="https://www.facebook.com/sharer/sharer.php?u=https://gs97ahn.github.io/Big_Data-Stream(1)"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>

<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->

        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">nogamsung</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a>
                </section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
            
            <h1 class="subscribe-overlay-title">Search nogamsung</h1>
            <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm" />
    <input class="location" type="hidden" name="location" />
    <input class="referrer" type="hidden" name="referrer" />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()" id="searchtext" type="text" name="searchtext"
            placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if (event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
        </div>
    </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function () {
            $('pre code').each(function (i, block) {
                hljs.highlightBlock(block);
            });
        });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
        </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-227528384-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>

</html>